{"ast":null,"code":"var _jsxFileName = \"/Users/siteoptz/siteoptz-scraping/src/components/CyfeDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useUser } from '../contexts/UserContext';\nimport CyfeService from '../services/CyfeService';\nimport DashboardAuth from './DashboardAuth';\nimport './CyfeDashboard.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CyfeDashboard = ({\n  dashboardId,\n  dashboardName,\n  requiredPlan = 'free',\n  className = '',\n  height = '600px',\n  showControls = true\n}) => {\n  _s();\n  const {\n    user,\n    currentPlan\n  } = useUser();\n  const [dashboardUrl, setDashboardUrl] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const iframeRef = useRef(null);\n  useEffect(() => {\n    generateDashboardUrl();\n  }, [dashboardId, user === null || user === void 0 ? void 0 : user.id, currentPlan]);\n  const generateDashboardUrl = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      // Generate authenticated dashboard URL\n      const url = CyfeService.generateDashboardUrl(dashboardId, user === null || user === void 0 ? void 0 : user.id, currentPlan);\n      setDashboardUrl(url);\n    } catch (err) {\n      setError(err.message);\n      console.error('Error generating dashboard URL:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleIframeLoad = () => {\n    setIsLoading(false);\n  };\n  const handleIframeError = () => {\n    setError('Failed to load dashboard');\n    setIsLoading(false);\n  };\n  const refreshDashboard = () => {\n    if (iframeRef.current) {\n      iframeRef.current.src = iframeRef.current.src;\n    }\n  };\n  const openInNewTab = () => {\n    window.open(dashboardUrl, '_blank');\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `cyfe-dashboard-error ${className}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error-icon\",\n          children: \"\\u26A0\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Dashboard Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: generateDashboardUrl,\n          className: \"retry-button\",\n          children: \"Retry\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(DashboardAuth, {\n    dashboardId: dashboardId,\n    requiredPlan: requiredPlan,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `cyfe-dashboard ${className}`,\n      children: [showControls && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dashboard-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: dashboardName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"plan-badge\",\n            children: requiredPlan\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dashboard-controls\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: refreshDashboard,\n            className: \"control-button\",\n            title: \"Refresh Dashboard\",\n            children: \"\\uD83D\\uDD04\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: openInNewTab,\n            className: \"control-button\",\n            title: \"Open in New Tab\",\n            children: \"\\uD83D\\uDD17\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-container\",\n        style: {\n          height\n        },\n        children: [isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dashboard-loading\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"loading-spinner\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading dashboard...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n          ref: iframeRef,\n          src: dashboardUrl,\n          title: dashboardName,\n          className: \"dashboard-iframe\",\n          onLoad: handleIframeLoad,\n          onError: handleIframeError,\n          style: {\n            display: isLoading ? 'none' : 'block'\n          },\n          sandbox: \"allow-scripts allow-same-origin allow-forms\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(CyfeDashboard, \"Dcb8zTE8TTa8ev+gfcg+2G3mx5E=\", false, function () {\n  return [useUser];\n});\n_c = CyfeDashboard;\nexport default CyfeDashboard;\nvar _c;\n$RefreshReg$(_c, \"CyfeDashboard\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useUser","CyfeService","DashboardAuth","jsxDEV","_jsxDEV","CyfeDashboard","dashboardId","dashboardName","requiredPlan","className","height","showControls","_s","user","currentPlan","dashboardUrl","setDashboardUrl","isLoading","setIsLoading","error","setError","iframeRef","generateDashboardUrl","id","url","err","message","console","handleIframeLoad","handleIframeError","refreshDashboard","current","src","openInNewTab","window","open","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","style","ref","onLoad","onError","display","sandbox","_c","$RefreshReg$"],"sources":["/Users/siteoptz/siteoptz-scraping/src/components/CyfeDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useUser } from '../contexts/UserContext';\nimport CyfeService from '../services/CyfeService';\nimport DashboardAuth from './DashboardAuth';\nimport './CyfeDashboard.css';\n\nconst CyfeDashboard = ({ \n  dashboardId, \n  dashboardName, \n  requiredPlan = 'free',\n  className = '',\n  height = '600px',\n  showControls = true \n}) => {\n  const { user, currentPlan } = useUser();\n  const [dashboardUrl, setDashboardUrl] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const iframeRef = useRef(null);\n\n  useEffect(() => {\n    generateDashboardUrl();\n  }, [dashboardId, user?.id, currentPlan]);\n\n  const generateDashboardUrl = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      // Generate authenticated dashboard URL\n      const url = CyfeService.generateDashboardUrl(dashboardId, user?.id, currentPlan);\n      setDashboardUrl(url);\n    } catch (err) {\n      setError(err.message);\n      console.error('Error generating dashboard URL:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleIframeLoad = () => {\n    setIsLoading(false);\n  };\n\n  const handleIframeError = () => {\n    setError('Failed to load dashboard');\n    setIsLoading(false);\n  };\n\n  const refreshDashboard = () => {\n    if (iframeRef.current) {\n      iframeRef.current.src = iframeRef.current.src;\n    }\n  };\n\n  const openInNewTab = () => {\n    window.open(dashboardUrl, '_blank');\n  };\n\n  if (error) {\n    return (\n      <div className={`cyfe-dashboard-error ${className}`}>\n        <div className=\"error-content\">\n          <div className=\"error-icon\">⚠️</div>\n          <h3>Dashboard Error</h3>\n          <p>{error}</p>\n          <button onClick={generateDashboardUrl} className=\"retry-button\">\n            Retry\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <DashboardAuth dashboardId={dashboardId} requiredPlan={requiredPlan}>\n      <div className={`cyfe-dashboard ${className}`}>\n        {showControls && (\n          <div className=\"dashboard-header\">\n            <div className=\"dashboard-info\">\n              <h3>{dashboardName}</h3>\n              <span className=\"plan-badge\">{requiredPlan}</span>\n            </div>\n            <div className=\"dashboard-controls\">\n              <button \n                onClick={refreshDashboard}\n                className=\"control-button\"\n                title=\"Refresh Dashboard\"\n              >\n                🔄\n              </button>\n              <button \n                onClick={openInNewTab}\n                className=\"control-button\"\n                title=\"Open in New Tab\"\n              >\n                🔗\n              </button>\n            </div>\n          </div>\n        )}\n        \n        <div className=\"dashboard-container\" style={{ height }}>\n          {isLoading && (\n            <div className=\"dashboard-loading\">\n              <div className=\"loading-spinner\"></div>\n              <p>Loading dashboard...</p>\n            </div>\n          )}\n          \n          <iframe\n            ref={iframeRef}\n            src={dashboardUrl}\n            title={dashboardName}\n            className=\"dashboard-iframe\"\n            onLoad={handleIframeLoad}\n            onError={handleIframeError}\n            style={{ display: isLoading ? 'none' : 'block' }}\n            sandbox=\"allow-scripts allow-same-origin allow-forms\"\n          />\n        </div>\n      </div>\n    </DashboardAuth>\n  );\n};\n\nexport default CyfeDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}