{"ast":null,"code":"var _jsxFileName = \"/Users/siteoptz/siteoptz-scraping/src/components/DashboardAuth.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useUser } from '../contexts/UserContext';\nimport CyfeService from '../services/CyfeService';\nimport './DashboardAuth.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst DashboardAuth = ({\n  children,\n  dashboardId,\n  requiredPlan\n}) => {\n  _s();\n  const {\n    user,\n    currentPlan\n  } = useUser();\n  const [hasAccess, setHasAccess] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    checkDashboardAccess();\n  }, [dashboardId, currentPlan]);\n  const checkDashboardAccess = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      // Check if user has access to the dashboard\n      const access = CyfeService.hasDashboardAccess(user === null || user === void 0 ? void 0 : user.id, currentPlan, dashboardId);\n\n      // Check if user's plan meets requirements\n      const planHierarchy = ['free', 'starter', 'pro', 'enterprise'];\n      const currentPlanIndex = planHierarchy.indexOf(currentPlan);\n      const requiredPlanIndex = planHierarchy.indexOf(requiredPlan);\n      const planAccess = currentPlanIndex >= requiredPlanIndex;\n      setHasAccess(access && planAccess);\n      if (!access) {\n        setError('Dashboard not available for your current plan');\n      } else if (!planAccess) {\n        setError(`This dashboard requires ${requiredPlan} plan or higher`);\n      }\n    } catch (err) {\n      setError('Error checking dashboard access');\n      console.error('Dashboard access check failed:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-auth-loading\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Checking dashboard access...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-auth-error\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-icon\",\n        children: \"\\u26A0\\uFE0F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Access Restricted\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"upgrade-button\",\n        onClick: () => window.location.href = `/dashboard/${currentPlan}#upgrade`,\n        children: \"Upgrade Plan\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this);\n  }\n  if (!hasAccess) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-auth-denied\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"denied-icon\",\n        children: \"\\uD83D\\uDD12\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Dashboard Not Available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"This dashboard is not included in your current plan.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"upgrade-button\",\n        onClick: () => window.location.href = `/dashboard/${currentPlan}#upgrade`,\n        children: \"View Upgrade Options\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: children\n  }, void 0, false);\n};\n_s(DashboardAuth, \"Fo4+DgScOFh2d52Ufk2bz4fcOec=\", false, function () {\n  return [useUser];\n});\n_c = DashboardAuth;\nexport default DashboardAuth;\nvar _c;\n$RefreshReg$(_c, \"DashboardAuth\");","map":{"version":3,"names":["React","useState","useEffect","useUser","CyfeService","jsxDEV","_jsxDEV","Fragment","_Fragment","DashboardAuth","children","dashboardId","requiredPlan","_s","user","currentPlan","hasAccess","setHasAccess","isLoading","setIsLoading","error","setError","checkDashboardAccess","access","hasDashboardAccess","id","planHierarchy","currentPlanIndex","indexOf","requiredPlanIndex","planAccess","err","console","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","href","_c","$RefreshReg$"],"sources":["/Users/siteoptz/siteoptz-scraping/src/components/DashboardAuth.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useUser } from '../contexts/UserContext';\nimport CyfeService from '../services/CyfeService';\nimport './DashboardAuth.css';\n\nconst DashboardAuth = ({ children, dashboardId, requiredPlan }) => {\n  const { user, currentPlan } = useUser();\n  const [hasAccess, setHasAccess] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    checkDashboardAccess();\n  }, [dashboardId, currentPlan]);\n\n  const checkDashboardAccess = async () => {\n    try {\n      setIsLoading(true);\n      setError(null);\n\n      // Check if user has access to the dashboard\n      const access = CyfeService.hasDashboardAccess(user?.id, currentPlan, dashboardId);\n      \n      // Check if user's plan meets requirements\n      const planHierarchy = ['free', 'starter', 'pro', 'enterprise'];\n      const currentPlanIndex = planHierarchy.indexOf(currentPlan);\n      const requiredPlanIndex = planHierarchy.indexOf(requiredPlan);\n      \n      const planAccess = currentPlanIndex >= requiredPlanIndex;\n      \n      setHasAccess(access && planAccess);\n      \n      if (!access) {\n        setError('Dashboard not available for your current plan');\n      } else if (!planAccess) {\n        setError(`This dashboard requires ${requiredPlan} plan or higher`);\n      }\n    } catch (err) {\n      setError('Error checking dashboard access');\n      console.error('Dashboard access check failed:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"dashboard-auth-loading\">\n        <div className=\"loading-spinner\"></div>\n        <p>Checking dashboard access...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"dashboard-auth-error\">\n        <div className=\"error-icon\">‚ö†Ô∏è</div>\n        <h3>Access Restricted</h3>\n        <p>{error}</p>\n        <button \n          className=\"upgrade-button\"\n          onClick={() => window.location.href = `/dashboard/${currentPlan}#upgrade`}\n        >\n          Upgrade Plan\n        </button>\n      </div>\n    );\n  }\n\n  if (!hasAccess) {\n    return (\n      <div className=\"dashboard-auth-denied\">\n        <div className=\"denied-icon\">üîí</div>\n        <h3>Dashboard Not Available</h3>\n        <p>This dashboard is not included in your current plan.</p>\n        <button \n          className=\"upgrade-button\"\n          onClick={() => window.location.href = `/dashboard/${currentPlan}#upgrade`}\n        >\n          View Upgrade Options\n        </button>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n};\n\nexport default DashboardAuth;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}